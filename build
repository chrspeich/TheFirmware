var :include_paths, [ "-I#{path('.')}" ]
var :cflags, [ '$define', '-Xclang', '-fcolor-diagnostics', '$include_paths', '-fno-builtin', '-Wall', '-Werror',  '-Wno-deprecated-register', '-Wno-unused-function', "--sysroot=#{path('./Toolchain/arm.toolchain/')}"]
var :cxxflags, [ '$cflags', '-fno-exceptions', '-fno-rtti', '-fno-unwind-tables', '-Wno-c++98-compat-pedantic']
var :ldflags, [ "-nostdlib", '-lgcc' ]

if options.debug
  var :define, [ '-DDEBUG=1' ]
  var :cflags, [ '-ggdb' ]
else
  var :cflags, [ '-Os' ]
end

parse 'arch/build'
parse 'core/build'
parse 'platform/build'
parse 'tests/build'
